name: Simple Broadcast

on:
  push:
    branches: [ "main", "master" ]

jobs:
  broadcast:
    runs-on: self-hosted
    
    steps:
    - name: Get subscribers and broadcast
      shell: cmd
      run: |
        echo Getting bot updates...
        curl -s "https://api.telegram.org/bot${{ secrets.TELEGRAM_BOT_TOKEN }}/getUpdates" > updates.json
        
        echo Sending broadcast message...
        curl -s -X POST "https://api.telegram.org/bot${{ secrets.TELEGRAM_BOT_TOKEN }}/sendMessage" -d "chat_id=6135147194" -d "text=GitHub Push Alert! Repository: ${{ github.repository }}, Author: ${{ github.actor }}, Commit: ${{ github.sha }}, Status: SUCCESS"
        
        echo Broadcast completed!
